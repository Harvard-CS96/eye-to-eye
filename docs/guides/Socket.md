# Socket Logic

The server communicates over *WebSocket* using *Socket.io* routes in `/sockets.js`. Routes in this file are used initially to communicate to the matching engine to facilitate matching users who are online and waiting to find a video chat partner. After the matching engine has paired users, the other routes in this file are used to generate a unique room ID for those users to join, sending credentials for the STUN servers as well as a room ID.

`/socket.js` exports a function that accepts an node HTTP server, an initialized `Socket.io` server attached to an HTTP server, a `Matcher` from `/matcher.js`, and a `config` object loaded from `getconfig`. Because we use the `express-socket.io-session` package, we can use the `socket.handshake.session` variable to access persistable session data individual to each socket. 